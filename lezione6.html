<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lezione 6: Regressione Polinomiale - Il Diodo</title>
    <style>
        /* --- STILE BASE (Layout Standard) --- */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        /* --- TEMA VIOLA (Specifco Lezione 6) --- */
        .header {
            background: linear-gradient(135deg, #9b59b6, #8e44ad); /* Viola */
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 { margin-bottom: 10px; color: white; }
        
        .nav {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .nav a {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background: #9b59b6; /* Bottone Viola */
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        .nav a:hover { background: #8e44ad; }
        
        .content {
            background: white;
            padding: 30px;
            border-radius: 8px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #9b59b6; /* Sottolineatura Viola */
            padding-bottom: 10px;
            margin-top: 30px;
        }
        
        /* BOX */
        .box {
            background: #f4ecf7; /* Sfondo viola chiarissimo */
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #9b59b6;
            border-radius: 5px;
        }
        
        .box.warning {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .box.danger {
            background: #fde8e8;
            border-left-color: #e74c3c;
        }
        
        .box.success {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        .box.info {
            background: #d6eaf8;
            border-left-color: #3498db;
        }
        
        /* CODICE (Standard Dark) */
        .code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            font-family: 'Courier New', monospace;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        /* ELEMENTI DIDATTICI */
        .step {
            background: #f4ecf7;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 3px solid #9b59b6;
        }
        
        .formula {
            text-align: center;
            font-size: 1.3em;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
            font-family: 'Cambria', 'Times New Roman', serif;
            border: 2px solid #9b59b6;
        }

        /* TABELLA */
        .parameter-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .parameter-table th, .parameter-table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        
        .parameter-table th {
            background: #9b59b6; /* Intestazione Viola */
            color: white;
        }

        /* GRAFICI CSS */
        .diode-graph {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            border: 2px solid #9b59b6;
        }
        
        .graph-axis {
            position: relative;
            height: 200px;
            margin: 20px auto;
            width: 300px;
            border-left: 2px solid #333;
            border-bottom: 2px solid #333;
        }
        
        .linear-line {
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            background: #e74c3c;
            transform: rotate(30deg);
            transform-origin: left;
        }
        
        .exp-line {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100px;
            border-top: 3px solid #9b59b6; /* Curva Viola */
            border-radius: 0 100% 0 0;
        }

        /* CONFRONTO */
        .comparison {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .comparison-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 45%;
            min-width: 300px;
            margin: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 4px solid #9b59b6;
        }

        /* OSCILLAZIONE */
        .oscillation {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: repeating-linear-gradient(
                45deg,
                #fde8e8,
                #fde8e8 10px,
                #f9d6d6 10px,
                #f9d6d6 20px
            );
            border-radius: 8px;
            color: #c0392b;
            font-weight: bold;
            border: 1px solid #e74c3c;
        }

        /* QUIZ */
        .quiz-container {
            padding: 25px;
            background: #f4ecf7; /* Sfondo in tema */
            border: 2px solid #9b59b6;
            border-radius: 8px;
            margin-top: 30px;
        }

        .quiz-button {
            background: #9b59b6;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
            transition: background 0.3s;
        }
        .quiz-button:hover { background: #8e44ad; }

        .reward {
            margin-top: 20px; 
            padding: 15px; 
            background: #d5f4e6; 
            border-radius: 5px; 
            color: #2c3e50;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üåÄ Lezione 6: Oltre la Linearit√†</h1>
        <p>Modellare il Diodo e la Regressione Polinomiale</p>
        <p><strong>Laboratorio di Sistemi e Automazione</strong></p>
    </div>
    
    <div class="nav">
        <a href="lezione5.html">‚Üê Lezione 5</a>
        <a href="#problema">Il Problema</a>
        <a href="#polinomiale">Regressione Polinomiale</a>
        <a href="#implementazione">Implementazione</a>
        <a href="#oscillazioni">Oscillazioni</a>
        <a href="Python_6.pdf" target="_blank">üìÑ PDF Originale</a>
        <a href="lezione7.html">Lezione 7 ‚Üí</a>
    </div>
    
    <div class="content">
        <h2 id="problema">üéØ Il Problema: Quando Ohm non basta</h2>
        <p>Fino ad ora abbiamo analizzato resistori, che seguono la Legge di Ohm (V = R ¬∑ I). La relazione √® una <strong>linea retta</strong>.</p>
        
        <div class="box warning">
            <h3>‚ö†Ô∏è Ma in elettronica, i componenti pi√π interessanti sono <strong>Non-Lineari</strong>.</h3>
            <p>Oggi analizzeremo un <strong>DIODO</strong>. La sua corrente non cresce in modo proporzionale alla tensione.</p>
        </div>
        
        <h3>üî¨ Equazione di Shockley del Diodo:</h3>
        <div class="formula">
            I = I‚Çõ ¬∑ (e^(V/(n¬∑V‚Çú)) - 1)
        </div>
        
        <table class="parameter-table">
            <tr>
                <th>Parametro</th>
                <th>Significato</th>
                <th>Valore Tipico</th>
            </tr>
            <tr>
                <td><strong>I‚Çõ</strong></td>
                <td>Corrente di saturazione inversa</td>
                <td>1 pA (piccolissima)</td>
            </tr>
            <tr>
                <td><strong>V‚Çú</strong></td>
                <td>Tensione termica</td>
                <td>‚âà 26mV a 300K</td>
            </tr>
            <tr>
                <td><strong>n</strong></td>
                <td>Fattore di idealit√†</td>
                <td>1 (diodo ideale)</td>
            </tr>
        </table>
        
        <div class="diode-graph">
            <h3>üìà Comportamento del Diodo vs Retta</h3>
            <div class="graph-axis">
                <div class="linear-line" title="Retta (Errore!)"></div>
                <div class="exp-line" title="Esponenziale (Diodo)"></div>
            </div>
            <p><em>Figura 1: Una linea retta (rossa) non pu√≤ approssimare una curva esponenziale (viola)</em></p>
        </div>
        
        <div class="box danger">
            <h3>‚ùå Errore Concettuale</h3>
            <p>Se provassimo a usare <code>LinearRegression</code> (una retta) su un diodo, otterremmo un modello che prevede corrente anche quando il diodo √® spento! La retta √® troppo rigida.</p>
        </div>
        
        <h2 id="polinomiale">üîß La Soluzione: Regressione Polinomiale</h2>
        <p>Come facciamo a insegnare alla macchina a 'curvare'?</p>
        
        <div class="box">
            <h3>üéØ Il trucco matematico: <strong>Polynomial Features</strong></h3>
            <p>Invece di dare alla macchina solo la tensione <em>V</em>, le diamo anche le sue potenze:</p>
            <div class="formula">
                Input = [V, V¬≤, V¬≥, ...]
            </div>
            <p>√à come dire alla macchina: "Non cercare solo una retta, cerca una curva che combina parabole (x¬≤) e cubiche (x¬≥)".</p>
        </div>
        
        <div class="comparison">
            <div class="comparison-item">
                <h3>üìê Regressione Lineare</h3>
                <div style="font-size: 3em;">üìà</div>
                <p><strong>Equazione:</strong> y = a + bx</p>
                <p><strong>Applicazione:</strong> Resistori lineari</p>
                <p><strong>Limite:</strong> Solo rette</p>
            </div>
            
            <div class="comparison-item">
                <h3>üåÄ Regressione Polinomiale</h3>
                <div style="font-size: 3em;">üìä</div>
                <p><strong>Equazione:</strong> y = a + bx + cx¬≤ + dx¬≥</p>
                <p><strong>Applicazione:</strong> Diodi, transistor</p>
                <p><strong>Vantaggio:</strong> Curve complesse</p>
            </div>
        </div>
        
        <h2 id="implementazione">üíª Implementazione in Python</h2>
        
        <div class="step">
            <h3>1. Generazione Dati (Simulazione Diodo)</h3>
        </div>
        
        <div class="code">
import numpy as np
import matplotlib.pyplot as plt

# Dati di Tensione (Input) da 0V a 0.8V
V = np.linspace(0, 0.8, 20).reshape(-1, 1)

# Parametri fisici del diodo
Is = 1e-12  # 1 picoampere
Vt = 0.026  # 26 millivolt
n = 1       # Fattore di idealit√†

# Equazione di Shockley (Output Corrente)
I = Is * (np.exp(V / (n * Vt)) - 1)

# Aggiungiamo rumore casuale (simuliamo errori di misura reali)
I_noise = I + np.random.normal(0, 0.0005, size=I.shape)

print("Dati diodo simulati con successo!")
        </div>
        
        <div class="step">
            <h3>2. La Magia: Pipeline Polinomiale</h3>
        </div>
        
        <div class="code">
from sklearn.preprocessing import PolynomialFeatures
from sklearn.linear_model import LinearRegression
from sklearn.pipeline import make_pipeline

# Creiamo un modello "Intelligente" che:
# 1. Eleva i dati alla potenza (grado 5)
# 2. Applica la regressione lineare su quei dati "potenziati"
grado = 5
modello_diodo = make_pipeline(PolynomialFeatures(grado), LinearRegression())

# Addestriamo il modello sui dati rumorosi
modello_diodo.fit(V, I_noise)

# Facciamo una predizione (disegniamo la curva appresa)
I_predetto = modello_diodo.predict(V)

print(f"Modello polinomiale di grado {grado} creato e addestrato!")
        </div>
        
        <div class="step">
            <h3>3. Visualizzazione: Retta vs Curva</h3>
        </div>
        
        <div class="code">
plt.scatter(V, I_noise, color='black', label='Dati Lab')
plt.plot(V, I_predetto, color='red', linewidth=2, label=f'Modello Polinomiale')

plt.title("Caratteristica I-V del Diodo")
plt.xlabel("Tensione V [Volt]")
plt.ylabel("Corrente I [Ampere]")
plt.legend()
plt.grid(True)
plt.show()
        </div>
        
        <h2 id="oscillazioni">‚ö†Ô∏è Analisi Critica: Le "Oscillazioni Fantasma"</h2>
        
        <div class="oscillation">
            <div style="font-size: 2em;">üåä</div>
            <p>Osserva attentamente la linea rossa nel grafico generato tra 0V e 0.6V</p>
        </div>
        
        <div class="box danger">
            <h3>üîç Cosa notiamo di strano?</h3>
            <ul>
                <li>La linea <strong>non √® piatta a zero</strong> come dovrebbe essere.</li>
                <li>Fa delle <strong>piccole onde (oscillazioni)</strong>.</li>
                <li>A volte scende addirittura <strong>sotto lo zero</strong> (Corrente negativa?! Impossibile in questo circuito).</li>
            </ul>
        </div>
        
        <div class="box">
            <h3>üéØ Perch√© succede?</h3>
            <p>In Elettronica sappiamo che sotto la soglia (0.6V) la corrente √® zero. <strong>Ma la macchina non sa cos'√® un diodo.</strong></p>
            <p>La macchina sta solo cercando di piegare una curva matematica per unire i punti. Per riuscire a salire velocemente dopo 0.6V, il polinomio deve "prendere la rincorsa" prima, creando oscillazioni.</p>
        </div>
        
        <h2>üß† Conclusione: Il Ruolo dell'Ingegnere</h2>
        <div class="box warning">
            <h3 style="text-align: center;">La Matematica non conosce la Fisica</h3>
            <p>L'algoritmo propone valori matematicamente corretti (minimizzano l'errore) ma fisicamente assurdi (corrente negativa). Un Data Scientist puro potrebbe accettarli, ma un <strong>Elettronico deve intervenire</strong>.</p>
        </div>

        <hr style="border: 1px solid #ddd; margin: 40px 0;">

        <h2>üìù Verifica Concetti Chiave</h2>
        <div class="quiz-container">
            <label for="q6">1. Perch√© la Regressione Lineare semplice fallisce con un Diodo?</label>
            <select id="q6" style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px;">
                <option value="0">Scegli...</option>
                <option value="sbagliata">Perch√© il diodo √® rotto.</option>
                <option value="corretta">Perch√© la relazione V-I del diodo √® esponenziale (non-lineare).</option>
                <option value="sbagliata">Perch√© abbiamo usato troppi dati.</option>
            </select>
            
            <button id="check-l6" class="quiz-button" onclick="checkL6Quiz()">Verifica Risposta</button>

            <div id="reward-l6" class="reward" style="display: none;">
                <p>Esatto! Serve una curva, non una retta. Ma attenzione alle oscillazioni!</p>
                <p>Nella prossima lezione vedremo come risolvere questo problema unendo Fisica e AI.</p>
                <p><a href="lezione7.html" style="color: #2ecc71; font-weight: bold;">‚û°Ô∏è Vai alla Lezione 7: Il Modello Ibrido</a></p>
            </div>
        </div>
        </div>
    
    <div class="footer">
        <p>Laboratorio di Sistemi e Automazione - ML per Elettronica</p>
        <p>Lezione 6: Regressione Polinomiale e Diodo</p>
        <p>
            <a href="lezione5.html">‚Üê Lezione 5</a> | 
            <a href="Python_6.pdf" target="_blank">üìÑ Scarica PDF Lezione 6</a> | 
            <a href="lezione7.html">Lezione 7 ‚Üí</a>
        </p>
    </div>

    <script>
        function checkL6Quiz() {
            const q6 = document.getElementById('q6').value;
            const reward = document.getElementById('reward-l6');
            const button = document.getElementById('check-l6');
            
            if (q6 === 'corretta') {
                reward.style.display = 'block';
                button.style.backgroundColor = '#2ecc71';
                alert("Quiz superato! Hai capito il limite della linearit√†.");
            } else {
                reward.style.display = 'none';
                button.style.backgroundColor = '#e74c3c';
                alert("Riprova: pensa alla forma della curva del diodo rispetto a una retta.");
            }
        }
    </script>
</body>
</html>
