<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lezione 6: Regressione Polinomiale - Il Diodo</title>
    <style>
        /* --- STILE BASE --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; max-width: 1000px; margin: 0 auto; padding: 20px; background-color: #f5f5f5; color: #333; }
        
        /* --- HEADER VIOLA --- */
        .header { background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; padding: 40px; border-radius: 15px; text-align: center; margin-bottom: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h1 { margin: 0 0 10px 0; font-size: 2.5em; }
        
        /* --- NAVIGAZIONE --- */
        .nav { background: white; padding: 15px; border-radius: 10px; margin-bottom: 25px; text-align: center; box-shadow: 0 3px 10px rgba(0,0,0,0.08); }
        .nav a { display: inline-block; margin: 0 10px; padding: 12px 25px; background: #9b59b6; color: white; text-decoration: none; border-radius: 30px; font-weight: bold; transition: all 0.3s; }
        .nav a:hover { background: #8e44ad; transform: translateY(-3px); }
        
        /* --- CONTENUTO --- */
        .content { background: white; padding: 40px; border-radius: 10px; box-shadow: 0 3px 10px rgba(0,0,0,0.08); margin-bottom: 30px; }
        h2 { color: #2c3e50; border-bottom: 3px solid #9b59b6; padding-bottom: 10px; margin-top: 40px; }
        h3 { color: #8e44ad; margin-top: 25px; }

        /* --- BOX --- */
        .box { background: #f4ecf7; padding: 25px; margin: 25px 0; border-left: 5px solid #9b59b6; border-radius: 8px; }
        .box.warning { background: #fff8e1; border-left-color: #ffb300; }
        .box.danger { background: #fde8e8; border-left-color: #e74c3c; }

        /* --- FORMULA CORRETTA (HTML PURO) --- */
        .formula { text-align: center; font-size: 1.4em; margin: 25px 0; padding: 20px; background: #f8f9fa; border: 2px dashed #9b59b6; border-radius: 8px; font-family: 'Times New Roman', serif; }

        /* --- CODICE PYTHON --- */
        .code-container { margin: 25px 0; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .code-header { background: #2c3e50; color: white; padding: 10px 20px; font-family: monospace; font-weight: bold; }
        .code { background: #263238; color: #ecf0f1; padding: 20px; font-family: 'Consolas', monospace; overflow-x: auto; margin: 0; white-space: pre; }

        /* --- IMMAGINE --- */
        .graph-container { text-align: center; margin: 30px 0; padding: 20px; border: 1px solid #ddd; background: white; border-radius: 8px; }
        .graph-figure { max-width: 100%; height: auto; border: 1px solid #eee; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }

        /* --- QUIZ --- */
        .quiz-container { padding: 30px; background: #f4ecf7; border: 2px solid #9b59b6; border-radius: 10px; margin-top: 40px; }
        .quiz-button { background: #9b59b6; color: white; padding: 12px 25px; border: none; cursor: pointer; border-radius: 5px; margin-top: 20px; font-weight: bold; transition: background 0.3s; }
        .quiz-button:hover { background: #8e44ad; }
        .reward { margin-top: 20px; padding: 15px; background: #d5f4e6; border-radius: 5px; color: #2c3e50; display: none; }
        
        .footer { text-align: center; margin-top: 50px; color: #7f8c8d; font-size: 0.9em; border-top: 1px solid #ddd; padding-top: 20px; }
    </style>
</head>
<body>

    <div class="header">
        <h1>üåÄ Lezione 6: Oltre la Linearit√†</h1>
        <p>Il Diodo e la Regressione Polinomiale</p>
    </div>
    
    <div class="nav">
        <a href="lezione5.html">‚Üê Lezione 5</a>
        <a href="#grafico">Vedi Grafico Python</a>
        <a href="lezione7.html">Lezione 7 ‚Üí</a>
    </div>
    
    <div class="content">
        <h2>üéØ Il Problema: Componenti Non-Lineari</h2>
        <p>Fino ad ora abbiamo usato rette (Legge di Ohm). Ma un <strong>DIODO</strong> segue una curva esponenziale, descritta dall'equazione di Shockley:</p>
        
        <div class="formula">
            I = I<sub>s</sub> ¬∑ (e<sup>V / (n ¬∑ V<sub>t</sub>)</sup> - 1)
        </div>
        
        <div class="box danger">
            <h3>‚ùå Perch√© la retta fallisce</h3>
            <p>Una retta √® rigida. Se proviamo ad usarla su un diodo, il modello preveder√† corrente anche quando il diodo √® spento, o sottostimer√† la crescita esponenziale.</p>
        </div>

        <h2>üíª La Soluzione: Regressione Polinomiale</h2>
        <p>Per "piegare" la retta, usiamo un trucco matematico: eleviamo i dati a potenza (V¬≤, V¬≥, V‚Åµ...) prima di darli in pasto all'algoritmo.</p>

        <div class="code-container">
            <div class="code-header">Python: Generazione Modello</div>
            <div class="code">
from sklearn.preprocessing import PolynomialFeatures
from sklearn.linear_model import LinearRegression
from sklearn.pipeline import make_pipeline

# 1. Pipeline: Trasforma i dati -> Applica Regressione
# Usiamo un grado 6 per tentare di seguire la curva ripida
grado = 6
modello = make_pipeline(PolynomialFeatures(grado), LinearRegression())

# 2. Addestramento
modello.fit(V, I_misurata)

# 3. Predizione e Grafico
I_pred = modello.predict(V_test)
plt.plot(V_test, I_pred, color='red')
plt.savefig('grafico_diodo.png')
            </div>
        </div>

        <h2 id="grafico">üìä Risultato (Dal tuo Python)</h2>
        <p>Ecco il grafico generato dal tuo script. La linea rossa √® il tentativo dell'AI di imparare il comportamento del diodo.</p>

        <div class="graph-container">
            <img src="grafico_diodo.png" alt="Grafico Diodo" class="graph-figure" onerror="this.style.display='none'; document.getElementById('error-msg').style.display='block';">
            
            <div id="error-msg" style="display:none; color: #c0392b; font-weight: bold; padding: 20px;">
                ‚ö†Ô∏è Immagine 'grafico_diodo.png' non trovata.<br>
                Assicurati di aver eseguito lo script Python nella stessa cartella di questo file HTML.
            </div>
        </div>

        <div class="box warning">
            <h3>‚ö†Ô∏è Analisi Critica: Le Oscillazioni</h3>
            <p>Guarda attentamente la linea rossa tra <strong>0V e 0.4V</strong>.</p>
            <p>Noti che "vibra" o scende leggermente sotto lo zero? Si chiama <em>Fenomeno di Runge</em>.</p>
            <p>La matematica pura (il polinomio) sta cercando di prendere la rincorsa per salire velocemente dopo, ma cos√¨ facendo crea valori fisicamente assurdi (corrente negativa).</p>
        </div>

        <hr>

        <h2>üìù Verifica Rapida</h2>
        <div class="quiz-container">
            <p><strong>Qual √® il difetto principale mostrato nel grafico sopra?</strong></p>
            <select id="q6" style="width: 100%; padding: 10px; border-radius: 5px;">
                <option value="0">Scegli la risposta...</option>
                <option value="sbagliata">La linea rossa √® troppo dritta.</option>
                <option value="corretta">La linea rossa oscilla dove dovrebbe essere zero.</option>
                <option value="sbagliata">I puntini neri sono troppo grandi.</option>
            </select>
            
            <button class="quiz-button" onclick="checkQuiz()">Verifica Risposta</button>

            <div id="reward" class="reward">
                <h4>‚úÖ Esatto!</h4>
                <p>Hai individuato il problema! Il modello matematico non conosce la fisica e crea oscillazioni impossibili.</p>
                <p><a href="lezione7.html" style="color: #27ae60; font-weight: bold;">‚û°Ô∏è Vai alla Lezione 7: La Soluzione Ibrida</a></p>
            </div>
        </div>
    </div>

    <div class="footer">
        Laboratorio di Sistemi e Automazione - Lezione 6
    </div>

    <script>
        function checkQuiz() {
            var val = document.getElementById('q6').value;
            var reward = document.getElementById('reward');
            if (val === 'corretta') {
                reward.style.display = 'block';
            } else if (val === 'sbagliata') {
                alert("Osserva bene la parte sinistra del grafico (basse tensioni).");
            }
        }
    </script>
</body>
</html>




