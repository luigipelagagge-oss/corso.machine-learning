<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lezione 3: Visualizzazione Dati - Grafici V-I</title>
    <style>
        /* --- BLOCCO CSS BASE (Standardizzato) --- */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            background: linear-gradient(135deg, #3498db, #2980b9); /* Colore standard blu */
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: white;
            margin-bottom: 10px;
        }
        
        .nav {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .nav a {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background: #3498db; /* Colore standard blu */
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        
        .content {
            background: white;
            padding: 30px;
            border-radius: 8px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db; /* Colore standard blu */
            padding-bottom: 10px;
            margin-top: 30px;
        }
        
        .box {
            background: #ecf0f1; /* Colore neutro standard */
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
            border-radius: 5px;
        }
        
        .box.warning {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .box.success {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        .code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            font-family: 'Courier New', monospace;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .step {
            background: #e8f4fc; /* Colore step standard */
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            border-left: 3px solid #3498db;
        }
        
        .step-number {
            display: inline-block;
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            text-align: center;
            line-height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .graph-container {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #3498db;
        }
        
        .graph-placeholder {
            display: inline-block;
            width: 300px;
            height: 200px;
            background: linear-gradient(45deg, #e0e0e0 25%, #f0f0f0 25%, #f0f0f0 50%, #e0e0e0 50%, #e0e0e0 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            margin: 10px;
            position: relative;
        }
        
        .graph-placeholder::after {
            content: "üìä Grafico Python";
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #666;
            font-weight: bold;
        }
        
        .note {
            background: #fff3cd;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.9em;
            border-left: 3px solid #ffc107;
        }

        /* STILI PER IL QUIZ */
        .quiz-container {
            padding: 25px;
            background: #f0f8ff;
            border: 2px solid #3498db;
            border-radius: 8px;
            margin-top: 30px;
        }

        .quiz-button {
            background: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            margin-top: 20px;
            transition: background 0.3s;
        }

        .quiz-button:hover {
            background: #2980b9;
        }

        .reward {
            margin-top: 20px; 
            padding: 15px; 
            background: #d5f4e6; 
            border-radius: 5px; 
            color: #2c3e50;
        }

        /* STILE PER L'IMMAGINE DEL GRAFICO */
        .graph-figure {
            max-width: 90%;
            height: auto;
            border: 1px solid #ccc;
            padding: 5px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üé® Lezione 3: Visualizzazione Dati</h1>
        <p>Creazione della Caratteristica V-I e Salvataggio File</p>
        <p><strong>Laboratorio di Sistemi e Automazione</strong></p>
    </div>
    
    <div class="nav">
        <a href="lezione2.html">‚Üê Lezione 2</a>
        <a href="#setup">Setup</a>
        <a href="#scatter">Scatter Plot</a>
        <a href="#regressione">Grafico Regressione</a>
        <a href="#salvataggio">Salvataggio</a>
        <a href="Python_3.pdf" target="_blank">üìÑ PDF Originale</a>
        <a href="lezione4.html">Lezione 4 ‚Üí</a>
    </div>
    
    <div class="content">
        <h2>üéØ Introduzione</h2>
        <p>Nella lezione precedente abbiamo calcolato la resistenza (<em>R</em>) e l'offset. Ora dobbiamo creare il <strong>grafico tecnico</strong> della relazione V-I per visualizzare questi risultati.</p>
        
        <div class="box warning">
            <h3>‚ö†Ô∏è Avviso per Google Colab</h3>
            <p>Se hai chiuso il notebook o ricaricato la pagina dopo la Lezione 2, la memoria si √® svuotata!</p>
            <p><strong>Prima di fare i grafici, devi rieseguire l'importazione dei dati e delle librerie.</strong></p>
        </div>
        
        <h2 id="setup">üîß Fase 0: Setup dell'Ambiente</h2>
        <div class="note">
            <strong>Importante:</strong> Questa fase √® necessaria per evitare errori come <code>NameError: name 'plt' is not defined</code> o dati mancanti.
        </div>
        
        <div class="step">
            <span class="step-number">1</span>
            <strong>Importazione Librerie e Dati</strong>
        </div>
        
        <div class="code">
# 1. Importiamo TUTTE le librerie necessarie
import matplotlib.pyplot as plt  # Libreria fondamentale per i grafici
import numpy as np               # Per i calcoli numerici e gli array
from sklearn.linear_model import LinearRegression  # Per il modello di regressione

# 2. Ricreiamo i dati della Lezione 2 (Misure Lab)
# Input (Corrente I)
X_corrente = np.array([[1.0], [2.0], [3.0], [4.0], [5.0]])
# Output (Tensione V misurata)
y_tensione = np.array([1.1, 1.9, 3.2, 3.8, 5.1])

# 3. Ricalcoliamo il modello (Fit)
modello = LinearRegression()
modello.fit(X_corrente, y_tensione)

print("Setup completato: Librerie caricate e Modello pronto.")
        </div>
        
        <h2 id="scatter">üìä Fase 1: Lo Scatter Plot (I Punti)</h2>
        <p>Il primo passo √® visualizzare le nostre misure 'grezze'. Usiamo <code>plt.scatter</code> che disegna i punti sperimentali senza collegarli con linee.</p>
        
        <div class="code">
# Creiamo una figura di dimensioni 8x5 pollici
plt.figure(figsize=(8, 5))

# Disegniamo i punti (Misure): colore blu
plt.scatter(X_corrente, y_tensione, color='blue', label='Misure Lab')

# Aggiungiamo la legenda per capire cos'√® il punto blu
plt.legend()
# Mostriamo il grafico a schermo
plt.show()
        </div>
        
        <div class="graph-container">
            <h3>Risultato Atteso (Fase 1):</h3>
            <div class="graph-placeholder"></div>
            <p><em>Figura 1: Rappresentazione dei punti sperimentali (Scatter Plot)</em></p>
        </div>
        
        <h2 id="regressione">üìà Fase 2: Sovrapporre la Regressione</h2>
        <p>Ora disegniamo la linea rossa che rappresenta il comportamento "ideale" calcolato dall'AI (la retta di regressione).</p>
        
        <div class="code">
# 1. Calcoliamo i valori teorici ideali (sulla retta) usando il modello addestrato
y_predetti = modello.predict(X_corrente)

plt.figure(figsize=(8, 5))

# 2. Rimettiamo i punti blu (Scatter)
plt.scatter(X_corrente, y_tensione, color='blue', label='Misure Lab')

# 3. Aggiungiamo la LINEA rossa (Plot)
# 'r-' significa: colore rosso (r), linea continua (-)
# linewidth=2 rende la linea pi√π spessa per visibilit√†
plt.plot(X_corrente, y_predetti, 'r-', linewidth=2, label='Modello Calcolato')

# Mostriamo la legenda e il grafico
plt.legend()
plt.show()
        </div>
        
        <div class="graph-container">
            <h3>Risultato Atteso (Fase 2):</h3>
            <div class="graph-placeholder"></div>
            <p><em>Figura 2: Punti sperimentali + Retta di regressione sovrapposta</em></p>
        </div>
        
        <h2>üé® Fase 3: Il Grafico Tecnico Completo</h2>
        <p>Un grafico da presentare in una relazione tecnica deve essere <strong>auto-esplicativo</strong> e completo di tutti i dettagli.</p>
        
        <div class="code">
plt.figure(figsize=(10, 6))  # Creiamo un foglio pi√π grande per maggiore chiarezza

# -- DISEGNO DEI DATI --
# Punti sperimentali: blu, dimensione (s) aumentata a 80
plt.scatter(X_corrente, y_tensione, color='blue', s=80, label='Misure Sperimentali')
# Retta di regressione: rossa, spessore 3
plt.plot(X_corrente, y_predetti, color='red', linewidth=3, label='Caratteristica V-I (Regressione)')

# -- ESTETICA (Labelling) --
plt.title("Caratteristica V-I Componente Ohmico", fontsize=14) # Titolo
plt.xlabel("Corrente I [mA]", fontsize=12) # Etichetta asse X con unit√†
plt.ylabel("Tensione V [Volt]", fontsize=12) # Etichetta asse Y con unit√†

# -- DETTAGLI AGGIUNTIVI --
plt.grid(True, linestyle='--', alpha=0.7)  # Griglia tratteggiata per facilitare la lettura
plt.legend(fontsize=12)  # Mostra la legenda

# -- OUTPUT --
plt.show()
        </div>
        
        <div class="box">
            <h3>üí° Elementi di un Grafico Professionale:</h3>
            <ul>
                <li><strong>Titolo descrittivo</strong> (cosa stiamo mostrando)</li>
                <li><strong>Etichette assi</strong> con unit√† di misura</li>
                <li><strong>Legenda</strong> chiara per distinguere dati e modello</li>
                <li><strong>Griglia</strong> per facilitare la lettura dei valori</li>
                <li><strong>Dimensioni appropriate</strong> per la stampa o la relazione</li>
            </ul>
        </div>

        <div class="graph-container">
            <h3>Risultato Finale Atteso (Grafico Completo):</h3>
            <img class="graph-figure" src="grafico_esempio.png" alt="Grafico V-I completo con punti sperimentali blu e retta di regressione rossa, titolo, etichette assi e legenda." />
            <p><em>Figura 3: Grafico tecnico completo della caratteristica V-I</em></p>
        </div>
        
        <h2 id="salvataggio">üíæ Fase 4: Salvare il Grafico su File</h2>
        <p>Per inserire il grafico nella tua relazione, devi salvarlo come file immagine.</p>
        
        <div class="note">
            <strong>Nota su Colab:</strong> Dopo aver eseguito questo codice, il file non appare magicamente sul tuo PC. Devi aprire la **cartella "Files"** (icona a sinistra dello schermo in Colab) per trovare e scaricare l'immagine <code>grafico_VI.png</code>.
        </div>
        
        <div class="code">
# Rieseguiamo il codice del grafico completo (SENZA plt.show alla fine)
plt.figure(figsize=(10, 6))
plt.scatter(X_corrente, y_tensione, color='blue', s=80, label='Misure Sperimentali')
plt.plot(X_corrente, y_predetti, color='red', linewidth=3, label='Caratteristica V-I')
plt.title("Caratteristica V-I Componente Ohmico")
plt.xlabel("Corrente I [mA]")
plt.ylabel("Tensione V [Volt]")
plt.grid(True, linestyle='--')
plt.legend()

# --- COMANDO DI SALVATAGGIO ---
# Salva la figura corrente in un file chiamato "grafico_VI.png"
# dpi=300 garantisce un'alta risoluzione adatta per la stampa professionale
plt.savefig("grafico_VI.png", dpi=300)

# Solo dopo aver salvato, possiamo mostrare il grafico a schermo (opzionale)
# plt.show() 

print("Immagine salvata! Controlla la cartella Files di Colab per scaricarla.")
        </div>
        
        <div class="box success">
            <h3>‚úÖ Parametri di Salvataggio Importanti:</h3>
            <p><strong><code>plt.savefig("nome_file.png", dpi=300)</code></strong></p>
            <ul>
                <li><code>"nome_file.png"</code>: Il nome e l'estensione del file (es. .png, .pdf, .jpg).</li>
                <li><code>dpi=300</code>: (Dots Per Inch) Imposta una risoluzione alta per una stampa nitida.</li>
                <li><strong>Dove viene salvato?</strong> Nella "current working directory" (la cartella di lavoro attiva) dell'ambiente Python.</li>
            </ul>
        </div>

        <div class="box warning">
             <h3>üìÅ Promemoria Repository</h3>
             <p>Ricorda la regola della Lezione 1: se vuoi che questo grafico (<code>grafico_VI.png</code>) sia visibile nel tuo sito web o nella tua documentazione HTML, dopo averlo scaricato da Colab, devi caricarlo nella tua **Repository** (la stessa cartella dei file <code>.html</code>).</p>
        </div>
        
        <h2>üîó Risorse Online</h2>
        <div class="box">
            <p>Vuoi vedere il codice in azione senza digitare tutto?</p>
            <p style="text-align: center;">
                <a href="#" style="background: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block;">
                    [ ESECUZIONE PROGRAMMA IN COLAB ]
                </a>
            </p>
        </div>
        
        <h2>üß† E ora? Apriamo la Scatola Nera</h2>
        <div class="box">
            <p>Abbiamo visto che la macchina traccia una linea perfetta (la regressione). Ma <strong>come fa a sceglierla</strong>?</p>
            <p>Perch√© non ha tracciato una linea un po' pi√π in alto o un po' pi√π in basso? Cosa significa "miglior" retta?</p>
        </div>

        <hr style="border: 1px solid #ddd; margin: 40px 0;">

        <h2 id="verifica">üìù Verifica Concetti Chiave</h2>
        <div class="quiz-container">
            <label for="q6">1. Qual √® la funzione di Matplotlib usata per disegnare i punti sperimentali (senza collegarli)?</label>
            <select id="q6" style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px;">
                <option value="0">Scegli...</option>
                <option value="sbagliata">plt.plot()</option>
                <option value="corretta">plt.scatter()</option>
                <option value="sbagliata">plt.show()</option>
                <option value="sbagliata">plt.figure()</option>
            </select>
            
            <button id="check-l3" class="quiz-button" onclick="checkL3Quiz()">Verifica Risposta</button>

            <div id="reward-l3" class="reward" style="display: none;">
                <p>Esatto! `plt.scatter()` √® per i punti dispersi.</p>
                <p>Sei pronto per capire come la macchina sceglie la retta migliore.</p>
                <p><a href="lezione4.html" style="color: #2ecc71; font-weight: bold;">‚û°Ô∏è Vai alla Lezione 4: La Teoria dell'Errore</a></p>
            </div>
        </div>
        <h2>üìã Riassunto Comandi matplotlib</h2>
        <div class="code">
# COMANDI FONDAMENTALI MATPLOTLIB
plt.figure(figsize=(10, 6))      # Crea figura dimensioni 10x6 pollici
plt.scatter(x, y)                # Disegna punti (scatter plot)
plt.plot(x, y, 'r-')             # Disegna linea (rossa e continua)
plt.title("Titolo")              # Aggiunge titolo
plt.xlabel("Etichetta X")        # Etichetta asse X
plt.ylabel("Etichetta Y")        # Etichetta asse Y
plt.grid(True)                   # Attiva griglia
plt.legend()                     # Mostra legenda
plt.show()                       # Mostra grafico a schermo
plt.savefig("file.png", dpi=300) # Salva grafico su file
        </div>
    </div>
    
    <div class="footer">
        <p>Laboratorio di Sistemi e Automazione - ML per Elettronica</p>
        <p>Lezione 3: Visualizzazione Dati con matplotlib</p>
        <p>
            <a href="lezione2.html">‚Üê Lezione 2</a> | 
            <a href="Python_3.pdf" target="_blank">üìÑ Scarica PDF Lezione 3</a> | 
            <a href="lezione4.html">Lezione 4 ‚Üí</a>
        </p>
    </div>

    <script>
        function checkL3Quiz() {
            const q6 = document.getElementById('q6').value;
            const reward = document.getElementById('reward-l3');
            const button = document.getElementById('check-l3');
            
            if (q6 === 'corretta') {
                reward.style.display = 'block';
                button.style.backgroundColor = '#2ecc71';
                alert("Quiz superato! Sei pronto per la Teoria dell'Errore.");
            } else {
                reward.style.display = 'none';
                button.style.backgroundColor = '#e74c3c';
                alert("Attenzione: risposta errata. Rivedi la sezione 'Fase 1: Lo Scatter Plot'.");
            }
        }
    </script>
    </body>
</html>
