<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lezione 7: Modello Ibrido - Fisica + AI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        h1 {
            color: white;
            margin-bottom: 10px;
        }
        
        .nav {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .nav a {
            display: inline-block;
            margin: 0 10px;
            padding: 10px 20px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 5px;
        }
        
        .content {
            background: white;
            padding: 30px;
            border-radius: 8px;
        }
        
        h2 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-top: 30px;
        }
        
        .box {
            background: #e8f4fc;
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid #3498db;
            border-radius: 5px;
        }
        
        .box.hybrid {
            background: linear-gradient(135deg, #e8f4fc, #d4edda);
            border-left-color: #2ecc71;
        }
        
        .box.warning {
            background: #fff3cd;
            border-left-color: #ffc107;
        }
        
        .box.success {
            background: #d4edda;
            border-left-color: #28a745;
        }
        
        .code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            font-family: 'Courier New', monospace;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .workflow {
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            margin: 30px 0;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }
        
        .workflow-step {
            text-align: center;
            padding: 15px;
            width: 200px;
        }
        
        .workflow-arrow {
            font-size: 2em;
            color: #3498db;
            font-weight: bold;
        }
        
        .hybrid-visual {
            text-align: center;
            margin: 30px 0;
            padding: 30px;
            background: linear-gradient(135deg, #e8f4fc 0%, #d4edda 100%);
            border-radius: 8px;
            border: 3px solid #3498db;
        }
        
        .filter-logic {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            text-align: center;
        }
        
        .comparison {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin: 30px 0;
        }
        
        .comparison-item {
            background: white;
            padding: 20px;
            border-radius: 8px;
            width: 45%;
            min-width: 300px;
            margin: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        
        .circuit-challenge {
            background: #fff3cd;
            padding: 20px;
            border-radius: 8px;
            margin: 30px 0;
            border-left: 4px solid #ffc107;
            text-align: center;
        }
        
        .terminal {
            background: #2c3e50;
            color: #2ecc71;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 15px 0;
        }
        
        .formula-box {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px dashed #3498db;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîß Lezione 7: Il Modello Ibrido</h1>
        <p>Unire Fisica e Intelligenza Artificiale</p>
        <p><strong>Laboratorio di Sistemi e Automazione</strong></p>
    </div>
    
    <div class="nav">
        <a href="lezione6.html">‚Üê Lezione 6</a>
        <a href="#introduzione">Introduzione</a>
        <a href="#logica">Logica del Filtro</a>
        <a href="#implementazione">Implementazione</a>
        <a href="#risultato">Risultato</a>
        <a href="Python_7.pdf" target="_blank">üìÑ PDF Originale</a>
        <a href="lezione8.html">Lezione 8 ‚Üí</a>
    </div>
    
    <div class="content">
        <h2 id="introduzione">üéØ Introduzione: L'Ingresso dell'Umano</h2>
        
        <div class="box warning">
            <h3>‚ö†Ô∏è Nella Lezione 6 abbiamo visto che:</h3>
            <p>La Regressione Polinomiale, pur essendo potente, √® <strong>'stupida'</strong>: crea oscillazioni e correnti negative dove non dovrebbero esistere.</p>
        </div>
        
        <div class="box hybrid">
            <h3>üöÄ Oggi impareremo il <strong>Physics-Informed Machine Learning</strong>:</h3>
            <p>L'idea √® semplice: <strong>non ci fidiamo ciecamente della macchina</strong>.</p>
            <p>Usiamo le nostre conoscenze di elettronica (il Diodo non conduce sotto soglia) per <strong>'correggere' le previsioni</strong>.</p>
        </div>
        
        <div class="hybrid-visual">
            <div style="font-size: 3em;">ü§ù</div>
            <h2>FISICA + INTELLIGENZA ARTIFICIALE</h2>
            <p><strong>Il meglio di due mondi</strong></p>
            <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                <div style="padding: 10px 20px; background: #3498db; color: white; border-radius: 5px;">
                    ü§ñ AI (Flessibilit√†)
                </div>
                <div style="padding: 10px 20px; background: #2ecc71; color: white; border-radius: 5px;">
                    ‚ö° FISICA (Correttezza)
                </div>
            </div>
        </div>
        
        <h2 id="logica">üîå La Logica del Filtro</h2>
        <p>Creeremo un sistema a due stadi:</p>
        
        <div class="workflow">
            <div class="workflow-step">
                <div style="font-size: 3em;">üìä</div>
                <h4>Stadio 1: AI</h4>
                <p>Il modello polinomiale fa la previsione (anche se oscillante)</p>
            </div>
            
            <div class="workflow-arrow">‚Üí</div>
            
            <div class="workflow-step">
                <div style="font-size: 3em;">‚ö°</div>
                <h4>Stadio 2: Logico</h4>
                <p>Una regola fisica "Hard" sovrascrive l'AI se necessario</p>
            </div>
            
            <div class="workflow-arrow">‚Üí</div>
            
            <div class="workflow-step">
                <div style="font-size: 3em;">‚úÖ</div>
                <h4>Output Finale</h4>
                <p>Risultato fisicamente corretto</p>
            </div>
        </div>
        
        <div class="filter-logic">
            Input Tensione V<br>
            ‚Üì<br>
            V &lt; 0.6V ?<br>
            ‚Üì<br>
            S√å: Forza I = 0 &nbsp;&nbsp; NO: Usa Modello AI<br>
            ‚Üì<br>
            Output Corrente
        </div>
        
        <div class="formula-box">
            <h3>üìê Equazione del Modello Ibrido:</h3>
            <div style="font-size: 1.3em; font-family: 'Cambria', serif;">
                I<sub>ibrido</sub> = 
                <table style="display: inline-table; vertical-align: middle;">
                    <tr>
                        <td style="border-bottom: 1px solid #333; padding: 0 10px;">0</td>
                        <td style="padding: 0 10px;">se V &lt; 0.6V (Fisica)</td>
                    </tr>
                    <tr>
                        <td style="padding: 0 10px;">Polinomio(V)</td>
                        <td style="padding: 0 10px;">se V ‚â• 0.6V (AI)</td>
                    </tr>
                </table>
            </div>
        </div>
        
        <h2 id="implementazione">üíª Implementazione in Python</h2>
        
        <div class="step">
            <h3>Fase 0: Setup e Addestramento (Ripristino Lezione 6)</h3>
        </div>
        
        <div class="code">
import numpy as np
import matplotlib.pyplot as plt
from sklearn.preprocessing import PolynomialFeatures
from sklearn.linear_model import LinearRegression
from sklearn.pipeline import make_pipeline

# 1. Dati e Modello Polinomiale (Oscillante) - Stesso della Lezione 6
V = np.linspace(0, 0.8, 20).reshape(-1, 1)
I = 1e-12 * (np.exp(V / 0.026) - 1)  # Equazione di Shockley
I_noise = I + np.random.normal(0, 0.0005, size=I.shape)

grado = 5
modello_diodo = make_pipeline(PolynomialFeatures(grado), LinearRegression())
modello_diodo.fit(V, I_noise)

print("Modello polinomiale (oscillante) ripristinato dalla Lezione 6")
        </div>
        
        <div class="step">
            <h3>Fase 1: Il Filtro Ibrido</h3>
        </div>
        
        <div class="code">
# Creiamo dati di test pi√π densi per vedere meglio la curva
V_test = np.linspace(0, 0.8, 100).reshape(-1, 1)

# 1. Previsione "grezza" del modello polinomiale
I_grezza = modello_diodo.predict(V_test)

# 2. SOGLIA FISICA DEL DIODO
SOGLIA_DIODO = 0.6  # Volt

# 3. LOGICA IBRIDA: np.where(condizione, valore_se_true, valore_se_false)
I_finale = np.where(V_test < SOGLIA_DIODO, 0, I_grezza)

# 4. Sicurezza aggiuntiva: nessuna corrente negativa
I_finale = np.maximum(I_finale, 0)

print("Filtro ibrido applicato con successo!")
        </div>
        
        <div class="box">
            <h3>üß† Spiegazione del Codice:</h3>
            <p><strong>np.where(condizione, vero, falso)</strong> √® la funzione chiave:</p>
            <ul>
                <li>Per ogni punto V_test, controlla se V &lt; 0.6V</li>
                <li>Se VERO: assegna 0 (fisica)</li>
                <li>Se FALSO: usa il valore predetto dall'AI</li>
            </ul>
            <p><strong>np.maximum(array, 0)</strong> garantisce che nessun valore sia negativo.</p>
        </div>
        
        <h2 id="risultato">üìä Il Risultato Finale: Grafico</h2>
        
        <div class="comparison">
            <div class="comparison-item" style="border-top: 4px solid #e74c3c;">
                <h3>üìà Modello Puro (Lezione 6)</h3>
                <div style="font-size: 2em; color: #e74c3c;">üåÄ</div>
                <p><strong>Problemi:</strong></p>
                <ul style="text-align: left;">
                    <li>Oscillazioni non fisiche</li>
                    <li>Correnti negative</li>
                    <li>Modella il rumore</li>
                </ul>
            </div>
            
            <div class="comparison-item" style="border-top: 4px solid #2ecc71;">
                <h3>‚úÖ Modello Ibrido (Lezione 7)</h3>
                <div style="font-size: 2em; color: #2ecc71;">üìê</div>
                <p><strong>Vantaggi:</strong></p>
                <ul style="text-align: left;">
                    <li>Piatta a zero sotto soglia</li>
                    <li>Nessuna oscillazione</li>
                    <li>Fisicamente corretto</li>
                </ul>
            </div>
        </div>
        
        <div class="code">
# CODICE PER VISUALIZZARE IL CONFRONTO
plt.figure(figsize=(12, 6))

# 1. Grafico sinistro: Modello Puro (oscillante)
plt.subplot(1, 2, 1)
plt.scatter(V, I_noise, color='black', alpha=0.5, label='Dati Lab')
plt.plot(V_test, I_grezza, 'r-', linewidth=2, label='Modello Polinomiale Puro')
plt.title("PRIMA: Modello Puro (Oscillante)")
plt.xlabel("Tensione V [Volt]")
plt.ylabel("Corrente I [A]")
plt.grid(True, alpha=0.3)
plt.legend()

# 2. Grafico destro: Modello Ibrido (corretto)
plt.subplot(1, 2, 2)
plt.scatter(V, I_noise, color='black', alpha=0.5, label='Dati Lab')
plt.plot(V_test, I_finale, 'g-', linewidth=2, label='Modello Ibrido (Filtrato)')
plt.axvline(x=SOGLIA_DIODO, color='blue', linestyle='--', alpha=0.7, label='Soglia 0.6V')
plt.title("DOPO: Modello Ibrido (Corretto)")
plt.xlabel("Tensione V [Volt]")
plt.ylabel("Corrente I [A]")
plt.grid(True, alpha=0.3)
plt.legend()

plt.tight_layout()
plt.show()
        </div>
        
        <div class="hybrid-visual">
            <h3>üé® Visualizzazione del Risultato</h3>
            <div style="display: flex; justify-content: center; gap: 20px; margin: 20px 0;">
                <div style="text-align: center;">
                    <div style="width: 150px; height: 100px; background: repeating-linear-gradient(45deg, #e74c3c, #e74c3c 10px, #f1948a 10px, #f1948a 20px); border-radius: 5px;"></div>
                    <p><strong>Prima:</strong> Oscillazioni</p>
                </div>
                <div style="font-size: 2em; align-self: center;">‚Üí</div>
                <div style="text-align: center;">
                    <div style="width: 150px; height: 100px; background: linear-gradient(to right, #27ae60 0%, #27ae60 30%, #2ecc71 30%, #2ecc71 100%); border-radius: 5px;"></div>
                    <p><strong>Dopo:</strong> Pulito e fisico</p>
                </div>
            </div>
            <p><em>La linea verde √® piatta a zero fino a 0.6V, poi segue l'esponenziale</em></p>
        </div>
        
        <h2>üî¨ Perch√© Questo Approccio √® Rivoluzionario</h2>
        
        <div class="box hybrid">
            <h3>üéØ Physics-Informed Machine Learning (PIML)</h3>
            <p>Non √® solo un "filtro". √à una <strong>filosofia di progettazione</strong>:</p>
            <ol>
                <li><strong>Usa l'AI per ci√≤ che sa fare bene</strong> (apprendere pattern complessi dai dati)</li>
                <li><strong>Usa la fisica per ci√≤ che sa fare bene</strong> (garantire correttezza fisica)</li>
                <li><strong>Combina i due approcci</strong> in modo sinergico</li>
            </ol>
        </div>
        
        <h2>üöÄ Sfida Finale: Verso il Circuito</h2>
        
        <div class="circuit-challenge">
            <h3>‚ö° Abbiamo un modello perfetto del Diodo. Ma...</h3>
            <p>In elettronica i componenti <strong>lavorano in gruppo</strong>.</p>
            <p>La prossima sfida sar√† <strong>collegare questo Diodo a una Resistenza</strong> e analizzare il circuito completo.</p>
        </div>
        
        <div class="workflow">
            <div class="workflow-step">
                <div style="font-size: 2em;">üîß</div>
                <h4>PASSO 1: Il Codice</h4>
                <p>Apri il Notebook, esegui il filtro e prepara il modello</p>
            </div>
            
            <div class="workflow-arrow">‚Üí</div>
            
            <div class="workflow-step">
                <div style="font-size: 2em;">üéØ</div>
                <h4>PASSO 2: La Sfida</h4>
                <p>Costruisci il circuito con diodo e resistenza</p>
            </div>
        </div>
        
        <div class="box success" style="text-align: center;">
            <h3>üöÄ Pronto per l'Applicazione Reale?</h3>
            <p>Una volta pronto il modello, vai alla lezione successiva per costruire il circuito completo.</p>
            <p style="margin-top: 15px;">
                <a href="lezione8.html" style="background: #e74c3c; color: white; padding: 12px 25px; text-decoration: none; border-radius: 5px; display: inline-block; font-weight: bold;">
                    ‚Üí VAI ALLA LEZIONE 8: IL CIRCUITO COMPLETO
                </a>
            </p>
        </div>
        
        <h2>üìã Riassunto Apprendimenti</h2>
        <div class="box">
            <h3>‚úÖ Cosa abbiamo imparato oggi:</h3>
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Physics-Informed ML</strong></td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">Combinare AI e conoscenza fisica</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>np.where()</strong></td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">Funzione per logica condizionale</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Filtro Fisico</strong></td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">Correggere previsioni non fisiche</td>
                </tr>
                <tr>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;"><strong>Soglia Diodo</strong></td>
                    <td style="padding: 10px; border-bottom: 1px solid #ddd;">0.6V per diodi al silicio</td>
                </tr>
                <tr>
                    <td style="padding: 10px;"><strong>Modelli Ibridi</strong></td>
                    <td style="padding: 10px;">Il futuro dell'ingegneria assistita da AI</td>
                </tr>
            </table>
        </div>
        
        <div class="terminal">
>>> import numpy as np<br>
>>> V = np.array([0.1, 0.5, 0.7, 0.8])<br>
>>> I_pred = np.array([0.001, 0.002, 0.1, 0.5])<br>
>>> I_hybrid = np.where(V < 0.6, 0, I_pred)<br>
>>> print(I_hybrid)<br>
[0.   0.   0.1  0.5]
        </div>
        
        <div class="box info">
            <h3>üí° Consiglio per Ingegneri:</h3>
            <p><strong>Sempre chiederti:</strong> "Le previsioni del mio modello hanno senso fisico?"</p>
            <p>Se la risposta √® NO, applica un filtro fisico come abbiamo fatto oggi.</p>
        </div>
    </div>
    
    <div class="footer">
        <p>Laboratorio di Sistemi e Automazione - ML per Elettronica</p>
        <p>Lezione 7: Modello Ibrido - Fisica + Intelligenza Artificiale</p>
        <p>
            <a href="lezione6.html">‚Üê Lezione 6</a> | 
            <a href="Python_7.pdf" target="_blank">üìÑ Scarica PDF Lezione 7</a> | 
            <a href="lezione8.html">Lezione 8 ‚Üí</a>
        </p>
    </div>
</body>
</html>